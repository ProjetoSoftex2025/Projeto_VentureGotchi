{% load static %}
{% load math_filters %}
<link rel="stylesheet" href="{% static 'css/base.css' %}">
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Dashboard | VentureGotchi</title>
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
</head>
<body>

<h1>VentureGotchi</h1>

<!-- Avatar + Level -->
<section>
    <img src="{% static 'avatars/' %}{{ request.user.avatar }}"
         alt="Avatar"
         width="64" height="64">

    <h2>{{ request.user.username }}</h2>
    <p>Nível {{ gotchi.level }}</p>
    <div class="xp-container">
        <div class="xp-label">
            XP: {{ current_xp }} / {{ xp_to_next_level }}
        </div>

        <div class="xp-bar">
            <div
                class="xp-fill"
                data-xp="{{ xp_percent }}"
            ></div>
        </div>
    </div>

    <!-- Barra de XP (base para animação CSS futura) -->
    <progress value="{{ gotchi.xp }}" max="{{ gotchi.level|add:'1'|mul:100 }}">
    </progress>
</section>

<hr>

<!-- Missões -->
<section>
    <h3>Missões</h3>
    <p>Missões concluídas: {{ completed_missions }}</p>

    <ul>
        {% for mission in missions %}
            <li>{{ mission.title }}</li>
        {% empty %}
            <li>Nenhuma missão disponível</li>
        {% endfor %}
    </ul>
</section>

<hr>

<!-- Conquistas -->
<section>
    <h3>Conquistas Recentes</h3>

    <ul>
        {% for achievement in achievements %}
            <li>{{ achievement.achievement.title }}</li>
        {% empty %}
            <li>Nenhuma conquista desbloqueada</li>
        {% endfor %}
    </ul>
</section>
<script src="{% static 'js/xp.js' %}"></script>
</body>
</html>