{% load static %}
{% load math_filters %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Dashboard | VentureGotchi</title>
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
</head>

<body>

<form method="post" action="{% url 'accounts:logout' %}">
    {% csrf_token %}
    <button type="submit">Logout</button>
</form>

<h1>VentureGotchi</h1>

<!-- Avatar + Level -->
<section>
    <img
        src="{% static 'avatars/default.png' %}"
        alt="Avatar"
        width="64"
        height="64"
    >

    <h2>{{ request.user.username }}</h2>
    <p>Nível {{ gotchi.level }}</p>

    <!-- XP -->
    <div class="xp-container">
        <div class="xp-label">
            XP: {{ current_xp }} / {{ xp_to_next_level }}
        </div>

        <div class="xp-bar">
            <div
                class="xp-fill"
                style="width: {{ xp_percent|floatformat:0 }}%;"
            ></div>
        </div>
    </div>
</section>

<hr>

<!-- Status do Gotchi -->
<section>
    <h3>Status do Gotchi</h3>
    <ul>
        <li>Técnica: {{ gotchi.tecnica }}</li>
        <li>Criatividade: {{ gotchi.criatividade }}</li>
        <li>Disciplina: {{ gotchi.disciplina }}</li>
        <li>Liderança: {{ gotchi.lideranca }}</li>
    </ul>
</section>

<hr>

<!-- Missões -->
<section>
    <h3>Missões</h3>
    <p>Missões concluídas: {{ completed_missions }}</p>

    <ul>
        {% for mission in missions %}
            <li>{{ mission.title }}</li>
        {% empty %}
            <li>Nenhuma missão disponível</li>
        {% endfor %}
    </ul>
</section>

<hr>

<!-- Conquistas -->
<section>
    <h3>Conquistas Recentes</h3>
    <ul>
        {% for achievement in achievements %}
            <li>{{ achievement.achievement.title }}</li>
        {% empty %}
            <li>Nenhuma conquista desbloqueada</li>
        {% endfor %}
    </ul>
</section>

</body>
</html>
